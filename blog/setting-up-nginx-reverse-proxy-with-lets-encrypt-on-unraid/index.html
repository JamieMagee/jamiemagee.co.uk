<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><link href=https://gmpg.org/xfn/11 rel=profile><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Setting up nginx reverse proxy with Let's Encrypt on unRAID &#183; Jamie Magee</title><link rel=preload href=/css/poole.css as=style><link rel=preload href=/css/hyde.css as=style><link rel=preload href=/css/poole-overrides.css as=style><link rel=preload href=/css/hyde-overrides.css as=style><link rel=preload href=/css/hyde-x.css as=style><link rel=preload href=/fonts/BerkeleyMono-Regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" as=style crossorigin><link rel=preload href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css as=style crossorigin><link rel=preload href=https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1/lite-youtube.min.js as=script crossorigin><link rel=stylesheet href=/css/poole.css><link rel=stylesheet href=/css/hyde.css><link rel=stylesheet href=/css/poole-overrides.css><link rel=stylesheet href=/css/hyde-overrides.css><link rel=stylesheet href=/css/hyde-x.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" crossorigin><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css crossorigin><style>@font-face{font-family:berkeley mono;src:url(/fonts/BerkeleyMono-Regular.woff2)format('woff2');font-display:swap}.lite-youtube-fallback{aspect-ratio:16/9;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:1em;padding:1em;background-color:#000;color:#fff;text-decoration:none;border-radius:8px;transition:background-color .2s ease}.lite-youtube-fallback:hover{background-color:#333;color:#fff}.lite-youtube-fallback::before{display:block;content:'';border:solid transparent;border-width:2em 0 2em 3em;border-left-color:red;transition:border-left-color .2s ease}.lite-youtube-fallback:hover::before{border-left-color:#fff}.lite-youtube-fallback:focus{outline:2px solid red;outline-offset:2px}</style><link rel=stylesheet href=/css/jamie.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel=icon type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon.ico><meta name=description content><meta name=keywords content><meta name=author content="Jamie Magee"><meta name=robots content="index, follow"><link rel=canonical href=/blog/setting-up-nginx-reverse-proxy-with-lets-encrypt-on-unraid/><meta property="og:url" content="/blog/setting-up-nginx-reverse-proxy-with-lets-encrypt-on-unraid/"><meta property="og:site_name" content="Jamie Magee"><meta property="og:title" content="Setting up nginx reverse proxy with Let's Encrypt on unRAID"><meta property="og:description" content="Late last year I set about building a new NAS to replace my aging HP ProLiant MicroServer N36L (though that’s a story for a different post). I decided to go with unRAID as my OS, over FreeNAS that I’d been running previously, mostly due to the simpler configuration, ease of expanding an array, and support for Docker and KVM.
Docker support makes it a lot easier to run some of the web apps that I rely on like Plex, Sonarr, CouchPotato and more, but accessing them securely outside my network is a different story. On FreeNAS I ran an nginx reverse proxy in a BSD jail, secured using basic auth, and SSL certificates from StartSSL. Thankfully there is already a Docker image, nginx-proxy by jwilder, which automatically configures nginx for you. As for SSL, Let’s Encrypt went into public beta in December, and recently issued their millionth certificate. There’s also a Docker image which will automatically manage your certificates, and configure nginx for you - letsencrypt-nginx-proxy-companion by jrcs."><meta property="og:locale" content="en_gb"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2016-03-28T00:00:00+00:00"><meta property="article:modified_time" content="2016-03-28T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting up nginx reverse proxy with Let's Encrypt on unRAID"><meta name=twitter:description content="Late last year I set about building a new NAS to replace my aging HP ProLiant MicroServer N36L (though that’s a story for a different post). I decided to go with unRAID as my OS, over FreeNAS that I’d been running previously, mostly due to the simpler configuration, ease of expanding an array, and support for Docker and KVM.
Docker support makes it a lot easier to run some of the web apps that I rely on like Plex, Sonarr, CouchPotato and more, but accessing them securely outside my network is a different story. On FreeNAS I ran an nginx reverse proxy in a BSD jail, secured using basic auth, and SSL certificates from StartSSL. Thankfully there is already a Docker image, nginx-proxy by jwilder, which automatically configures nginx for you. As for SSL, Let’s Encrypt went into public beta in December, and recently issued their millionth certificate. There’s also a Docker image which will automatically manage your certificates, and configure nginx for you - letsencrypt-nginx-proxy-companion by jrcs."><script type=module src=https://cdn.jsdelivr.net/npm/@justinribeiro/lite-youtube@1/lite-youtube.min.js></script></head><body class=theme-base-0c><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><div class=sidebar-head><h1><a href=/>Jamie Magee</a></h1></div><p class=lead>Programmer, Engineer, Problem Solver</p></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>Home</a></li><li class=sidebar-nav-item><a href=/about>About</a></li><li class=sidebar-nav-item><a href=/blog>Archive</a></li></ul><ul class=sidebar-nav><li class=sidebar-nav-item><a href=https://github.com/JamieMagee><i class="fa-brands fa-github-square fa-3x"></i></a>
<a href=https://bsky.app/profile/jamiemagee.bsky.social><i class="fa-brands fa-square-bluesky fa-3x"></i></a>
<a href=https://www.linkedin.com/in/jamiemagee1/><i class="fa-brands fa-linkedin fa-3x"></i></a>
<a href=/index.xml type=application/rss+xml><i class="fa-solid fa-rss-square fa-3x"></i></a></li></ul><p>&copy; 2025. <a href=https://creativecommons.org/licenses/by-nc/4.0/>CC BY-NC 4.0</a></p></div></div><div class="content container"><div class=post><h1 class=post-title>Setting up nginx reverse proxy with Let&rsquo;s Encrypt on unRAID</h1><span class=post-date>Mar 28, 2016 &#183; 3 minute read</span><p>Late last year I set about building a new NAS to replace my aging HP ProLiant MicroServer N36L (though that&rsquo;s a story for a different post). I decided to go with unRAID as my OS, over FreeNAS that I&rsquo;d been running previously, mostly due to the simpler configuration, ease of expanding an array, and support for Docker and KVM.</p><p>Docker support makes it a lot easier to run some of the web apps that I rely on like Plex, Sonarr, CouchPotato and more, but accessing them securely outside my network is a different story. On FreeNAS I ran an nginx reverse proxy in a BSD jail, secured using basic auth, and SSL certificates from <a href=https://www.startssl.com/>StartSSL</a>. Thankfully there is already a Docker image, <a href=https://hub.docker.com/r/jwilder/nginx-proxy/>nginx-proxy</a> by jwilder, which automatically configures nginx for you. As for SSL, <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a> went into public beta in December, and recently issued their millionth certificate. There&rsquo;s also a Docker image which will automatically manage your certificates, and configure nginx for you - <a href=https://hub.docker.com/r/jrcs/letsencrypt-nginx-proxy-companion/>letsencrypt-nginx-proxy-companion</a> by jrcs.</p><h2 id=preparation>Preparation</h2><p>Firstly, you need to set up and configure Docker. There is a fantastic guide on how to configure Docker <a href=https://lime-technology.com/docker-guide/>here</a> on the Lime Technology website. Next, you need to install the <a href="https://lime-technology.com/forum/index.php?topic=40262.0">Community Applications</a> plugin. This allows us to install Docker containers directly from the Docker Hub.</p><p>In order to access everything from outside your LAN you&rsquo;ll need to forward ports 80 and 443 to ports 8008 and 443, respectively, on your unRAID host. In addition, you&rsquo;ll need to use some sort of Dynamic DNS service, though in my case I bought a domain name and use CloudFlare to handle my DNS.</p><h2 id=nginx>nginx</h2><p>From the Apps page on the unRAID web interface, search for <code>nginx-proxy</code> and click &lsquo;get more results from Docker Hub&rsquo;. Click &lsquo;add&rsquo; under the listing for <code>nginx-proxy</code> by jwilder. Set the following container settings, changing your &lsquo;host path&rsquo; to wherever you store Docker configuration files on your unRAID host</p><p><img src=/img/nginx-proxy-settings.png alt="nginx-proxy settings"></p><p>To add basic auth to any of the sites you&rsquo;ll need to make a file with the <code>VIRTUAL_HOST</code> of the site, available to nginx in <code>/etc/nginx/htpasswd</code>. For example, I added a file in <code>/mnt/user/docker/nginx/htpasswd/</code>. You can create htpasswd files using <code>apache2-utils</code>, or there are sites available which can create them.</p><h2 id=lets-encrypt>Let&rsquo;s Encrypt</h2><p>From the Apps page again, search for <code>letsencrypt-nginx-proxy-companion</code>, click &lsquo;get more results from Docker Hub&rsquo;, and then click &lsquo;add&rsquo; under the listing for <code>letsencrypt-nginx-proxy-companion</code> by jrcs. Enter the following container settings, again changing your &lsquo;host path&rsquo; to wherever you store Docker configuration files on your unRAID host</p><p><img src=/img/lets-encrypt-settings.png alt="lets encrypt settings"></p><h2 id=putting-it-all-together>Putting it all together</h2><p>In order to configure nginx, you&rsquo;ll need to add four environment variables to the Docker containers you wish to put behind the reverse proxy. They are <code>VIRTUAL_HOST</code>, <code>VIRTUAL_PORT</code>, <code>LETSENCRYPT_HOST</code>, and <code>LETSENCRYPT_EMAIL</code>. <code>VIRTUAL_HOST</code> and <code>LETSENCRYPT_HOST</code> most likely need to be the same, and will be something like <code>subdomain.yourdomain.com</code>. <code>VIRTUAL_PORT</code> should be the port your Docker container exposes. For example, Sonarr uses port 8989 by default. <code>LETSENCRYPT_EMAIL</code> should be a valid email address that Let&rsquo;s Encrypt can use to email you about certificate expiries, etc.</p><p>Once <code>nginx-proxy</code>, <code>letsencrypt-nginx-proxy-companion</code>, and all your Docker containers are configured you should be able to access them all over SSL, with basic auth, from outside your LAN. You don&rsquo;t even have to worry about certificate renewals as it&rsquo;s all handled for you.</p></div></div></body></html>